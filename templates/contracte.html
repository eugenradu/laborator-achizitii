{% extends 'base.html' %}

{% block content %}
<h2>Lista Contractelor</h2>

<div class="actions">
    <!-- Butonul de adăugare este comentat intenționat, deoarece fluxul corect este generarea dintr-o procedură. -->
    <!-- <a href="{{ url_for('contracte.adauga_contract') }}" class="button">Adaugă Contract Nou</a> -->
</div>

<table>
    <thead>
        <tr>
            <th>Număr Contract</th>
            <th>Data Semnare</th>
            <th>Furnizor</th>
            <th>Procedură Asociată</th>
            <th>Valoare Totală</th>
            <th>Acțiuni</th>
        </tr>
    </thead>
    <tbody>
        {% for contract in contracte %}
        <tr>
            <td>{{ contract.Numar_Contract }}</td>
            <td>{{ contract.Data_Semnare.strftime('%d-%m-%Y') }}</td>
            <td>{{ contract.furnizor.Nume_Furnizor if contract.furnizor else 'N/A' }}</td>
            <td>
                <a href="{{ url_for('proceduri.detalii_procedura', procedura_id=contract.ID_Procedura) }}">{{
                    contract.procedura_contract.Nume_Procedura if contract.procedura_contract else 'N/A' }}</a>
            </td>
            <td><strong>{{ "%.2f"|format(contract.Pret_Total_Contract) }} {{ contract.Moneda }}</strong></td>
            <td>
                <a href="{{ url_for('contracte.detalii_contract', contract_id=contract.ID_Contract) }}">Detalii</a>
            </td>
        </tr>
        {% else %}
        <tr>
            <td colspan="6">Nu există niciun contract înregistrat.</td>
        </tr>
        {% endfor %}
    </tbody>
</table>
{% endblock %}